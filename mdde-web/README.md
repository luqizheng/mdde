# MDDE Web æœåŠ¡å™¨

MDDE (Multi-Development Docker Environment) Web æœåŠ¡å™¨æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„è„šæœ¬ç®¡ç†å¹³å°ï¼Œæä¾›å¼€å‘ç¯å¢ƒè„šæœ¬çš„ä¸Šä¼ ã€ä¸‹è½½å’Œç®¡ç†åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### 1. åŸºç¡€è„šæœ¬ä¸‹è½½
- æä¾› `mdde.ps1` (Windows PowerShell) å’Œ `mdde.sh` (Linux/macOS) çš„ä¸‹è½½
- è®¿é—®åœ°å€ï¼š`/download/mdde.ps1` å’Œ `/download/mdde.sh`


### 2. è„šæœ¬ä¸‹è½½
- **ç›®å½•ä¸‹è½½**: é€šè¿‡ `GET /get/{dirName}` ä¸‹è½½æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰è„šæœ¬ï¼ˆZIPæ ¼å¼ï¼‰
- **æ–‡ä»¶ä¸‹è½½**: é€šè¿‡ `GET /get/{dirName}/{filename}` ä¸‹è½½æŒ‡å®šç›®å½•ä¸‹çš„ç‰¹å®šæ–‡ä»¶
- ä¾‹å¦‚ï¼š`/get/net9` ä¸‹è½½æ•´ä¸ªç›®å½•ï¼Œ`/get/net9/script.ps1` ä¸‹è½½ç‰¹å®šæ–‡ä»¶

### 3. è„šæœ¬ä¸Šä¼ 
- é€šè¿‡ `POST /upload/{dirName}` ä¸Šä¼ è„šæœ¬åˆ°æŒ‡å®šç›®å½•
- è‡ªåŠ¨åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
- ä¾‹å¦‚ï¼š`/upload/net9_kudi` åˆ›å»º `scripts/net9_kudi` ç›®å½•å¹¶ä¸Šä¼ è„šæœ¬

### 4. è„šæœ¬åˆ—è¡¨æŸ¥è¯¢
- `GET /list` - åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è„šæœ¬ç›®å½•
- `GET /list/{dirName}` - åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„è„šæœ¬æ–‡ä»¶

### 5. è„šæœ¬åˆ é™¤
- `DELETE /delete/{dirName}/{fileName}` - åˆ é™¤æŒ‡å®šçš„è„šæœ¬æ–‡ä»¶

## ğŸ› ï¸ å®‰è£…å’Œè¿è¡Œ

### å‰ç½®è¦æ±‚
- Node.js 16+ 
- npm æˆ– yarn

### å¿«é€Ÿå¯åŠ¨

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

2. **å¯åŠ¨æœåŠ¡å™¨**
   ```bash
   npm start
   ```
   
   æˆ–è€…ä½¿ç”¨ PowerShell è„šæœ¬ï¼š
   ```powershell
   .\start.ps1
   ```

3. **è®¿é—®ç½‘ç«™**
   - ä¸»é¡µï¼šhttp://localhost:3000
   - ç®¡ç†ç•Œé¢ï¼šhttp://localhost:3000/admin.html

## ğŸ“ ç›®å½•ç»“æ„

```
mdde-web/
â”œâ”€â”€ server.js          # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ package.json       # é¡¹ç›®é…ç½®
â”œâ”€â”€ start.ps1         # PowerShell å¯åŠ¨è„šæœ¬
â”œâ”€â”€ admin.html        # ç®¡ç†ç•Œé¢
â”œâ”€â”€ index.html        # ä¸»é¡µ
â”œâ”€â”€ mdde.ps1     # Windows ç¯å¢ƒæ„å»ºè„šæœ¬
â”œâ”€â”€ mdde.sh      # Linux/macOS ç¯å¢ƒæ„å»ºè„šæœ¬
â”œâ”€â”€ scripts/          # è„šæœ¬å­˜å‚¨ç›®å½•
â”œâ”€â”€ â”œâ”€â”€ default/      # é»˜è®¤è„šæœ¬ï¼Œå¿…å®šå’Œå…¶ä»–ä¸€èµ·ä¸‹è½½
â”œâ”€â”€ â”œâ”€â”€ â”œâ”€â”€ run.sh      # åœ¨å®¹å™¨ä¸‹æ‰§è¡Œ å‘½ä»¤
â”œâ”€â”€ â”œâ”€â”€ â”œâ”€â”€ start.sh    # å¯åŠ¨å®¹å™¨
â”œâ”€â”€ â”œâ”€â”€ â”œâ”€â”€ stop.sh     # åœæ­¢å®¹å™¨
â”œâ”€â”€ â”œâ”€â”€ â”œâ”€â”€ restart.sh  # é‡å¯å®¹å™¨ã€‚
â”‚   â”œâ”€â”€ dotnet6/      # .NET 6 è„šæœ¬
â”‚   â”œâ”€â”€ dotnet9/      # .NET 9 è„šæœ¬
â”‚   â””â”€â”€ java17/       # Java 17 è„šæœ¬
â””â”€â”€ temp/             # ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
```








## ğŸ”Œ API æ¥å£

### åŸºç¡€è„šæœ¬ä¸‹è½½
```
GET /download/env-build.ps1
GET /download/env-build.sh
```

### è„šæœ¬ä¸‹è½½
```
GET /get/{dirName}           # ä¸‹è½½æ•´ä¸ªç›®å½•ï¼ˆZIPæ ¼å¼ï¼‰
GET /get/{dirName}/{filename} # ä¸‹è½½æŒ‡å®šæ–‡ä»¶
```
**å‚æ•°ï¼š**
- `dirName`: ç›®å½•åç§°ï¼ˆå¦‚ï¼šnet9, java17ï¼‰
- `filename`: æ–‡ä»¶åï¼ˆå¦‚ï¼šscript.ps1, run.shï¼‰

**ç¤ºä¾‹ï¼š**
- `/get/dotnet9` - ä¸‹è½½ dotnet9 ç›®å½•ä¸‹çš„æ‰€æœ‰è„šæœ¬
- `/get/dotnet9/example.ps1` - ä¸‹è½½ dotnet9 ç›®å½•ä¸‹çš„ example.ps1 æ–‡ä»¶

**å“åº”ï¼š** ZIP æ–‡ä»¶ä¸‹è½½

### è„šæœ¬ä¸Šä¼ 
```
POST /upload/{dirName}
```
**å‚æ•°ï¼š**
- `dirName`: ç›®æ ‡ç›®å½•åç§°
- `script`: è„šæœ¬æ–‡ä»¶ï¼ˆmultipart/form-dataï¼‰

**å“åº”ï¼š**
```json
{
  "message": "ä¸Šä¼ æˆåŠŸ",
  "fileName": "script.ps1",
  "dirName": "net9_kudi",
  "filePath": "/path/to/file"
}
```

### è„šæœ¬åˆ—è¡¨æŸ¥è¯¢
```
GET /list
```
**å“åº”ï¼š**
```json
{
  "directories": [
    {
      "name": "net9",
      "path": "/path/to/scripts/net9",
      "scripts": ["script1.ps1", "script2.sh"]
    }
  ]
}
```

```
GET /list/{dirName}
```
**å“åº”ï¼š**
```json
{
  "directory": "net9",
  "scripts": ["script1.ps1", "script2.sh"]
}
```

### è„šæœ¬åˆ é™¤
```
DELETE /delete/{dirName}/{fileName}
```
**å“åº”ï¼š**
```json
{
  "message": "åˆ é™¤æˆåŠŸ"
}
```

## ğŸŒ ä½¿ç”¨ç¤ºä¾‹

### ä½¿ç”¨ curl ä¸Šä¼ è„šæœ¬
```bash
curl -X POST -F "script=@my-script.ps1" http://localhost:3000/upload/net9_kudi
```

### ä½¿ç”¨ curl ä¸‹è½½è„šæœ¬ç›®å½•
```bash
curl -O -J http://localhost:3000/get/net9
```

### ä½¿ç”¨ curl è·å–è„šæœ¬åˆ—è¡¨
```bash
curl http://localhost:3000/list
```

## ğŸ”§ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡
- `PORT`: æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ï¼š3000ï¼‰

### æ–‡ä»¶å¤§å°é™åˆ¶
- å•ä¸ªè„šæœ¬æ–‡ä»¶æœ€å¤§ï¼š10MB

### æ”¯æŒçš„æ–‡ä»¶ç±»å‹
- PowerShell: `.ps1`
- Bash: `.sh`
- Batch: `.bat`, `.cmd`
- Python: `.py`
- JavaScript: `.js`
- æ–‡æœ¬æ–‡ä»¶: `.txt`, `.md`
- å…¶ä»–ç±»å‹æ–‡ä»¶

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**: å½“å‰ç‰ˆæœ¬æ²¡æœ‰èº«ä»½éªŒè¯ï¼Œè¯·åœ¨å†…ç½‘ç¯å¢ƒä½¿ç”¨
2. **æ–‡ä»¶è¦†ç›–**: ä¸Šä¼ åŒåæ–‡ä»¶ä¼šè¦†ç›–ç°æœ‰æ–‡ä»¶
3. **ç›®å½•åˆ é™¤**: åˆ é™¤ç›®å½•æ“ä½œä¸å¯æ¢å¤
4. **ä¸´æ—¶æ–‡ä»¶**: ä¸‹è½½æ—¶åˆ›å»ºçš„ ZIP æ–‡ä»¶ä¼šåœ¨ä¸‹è½½å®Œæˆåè‡ªåŠ¨åˆ é™¤

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æŸ¥çœ‹ç«¯å£å ç”¨
   netstat -ano | findstr :3000
   
   # ä¿®æ”¹ç«¯å£
   set PORT=3001
   npm start
   ```

2. **æƒé™é—®é¢˜**
   - ç¡®ä¿å¯¹ `scripts` ç›®å½•æœ‰è¯»å†™æƒé™
   - Windows ä¸‹å¯èƒ½éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ

3. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   # æ¸…é™¤ç¼“å­˜
   npm cache clean --force
   
   # é‡æ–°å®‰è£…
   rm -rf node_modules package-lock.json
   npm install
   ```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬
- æ”¯æŒè„šæœ¬ä¸Šä¼ ã€ä¸‹è½½ã€åˆ—è¡¨æŸ¥è¯¢
- æä¾› Web ç®¡ç†ç•Œé¢
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
- è‡ªåŠ¨ç›®å½•åˆ›å»º

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
